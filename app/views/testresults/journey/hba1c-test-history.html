{% extends 'layout-app.html' %}

{% set hub = "Your health" %}

{% set backLink = true %}
{% set backLinkText = "Back" %}

{% set pageHeading = "Your Haemoglobin A1c (HbA1c) estimation history" %}



{% block content %}

  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">

      <!-- DYNAMIC PAGE TITLE -->
      {{ dynamicPageTitle({
        title: pageHeading
    })}}
    <div>
        <img src="/images/documentation-example/hba1c-graph.png" alt="Haemoglobin HbA1c graph showing results over the last 6 months." width="342">
    </div>

    <div class="nhsuk-grid-column-full">
      <div style="width: 400px; height: 400px;"><canvas id="graph"></canvas></div>
    </div>

    <div style="padding-bottom: 16px;">
      <h3>Your result history</h3>
        <p class="nhsuk-body-m">The table below shows your haemoglobin A1c (HbA1c) results over the last 6 months.
            <br><br>
            The reference range for a haemoglobin A1c (HbA1c) test is from 20 to 42 mmol/mol. This range is based on your most recent test result.</p>
    </div>
    <div>
        <table class="nhsuk-table">
            <thead role="rowgroup" class="nhsuk-table__head">
              <tr role="row">
                <th role="columnheader" class="" scope="col">
                  Date
                </th>
                <th role="columnheader" class="" scope="col">
                  Result (g/L)
                </th>
              </tr>
            </thead>
            <tbody class="nhsuk-table__body">
              <tr role="row" class="nhsuk-table__row">
                <td class="nhsuk-table__cell">12 February 2024</td>
                <td class="nhsuk-table__cell ">46
                    <br>
                    <p class="nhsuk-body-s">(Within reference range)</p>
                </td>
              </tr>
              <tr role="row" class="nhsuk-table__row">
                <td class="nhsuk-table__cell">12 January 2024</td>
                <td class="nhsuk-table__cell ">41
                    <br>
                    <p class="nhsuk-body-s">(Within reference range)</p>
                </td>
              </tr>
              <tr role="row" class="nhsuk-table__row">
                <td class="nhsuk-table__cell">2 January 2024</td>
                <td class="nhsuk-table__cell ">39
                    <br>
                    <p class="nhsuk-body-s">(Within reference range)</p>
                </td>
              </tr>
              <tr role="row" class="nhsuk-table__row">
                <td class="nhsuk-table__cell">6 December 2023</td>
                <td class="nhsuk-table__cell ">46
                    <br>
                    <p class="nhsuk-body-s">(Outside reference range)</p>
                </td>
              </tr>
              <tr role="row" class="nhsuk-table__row">
                <td class="nhsuk-table__cell">21 November 2023</td>
                <td class="nhsuk-table__cell ">40
                    <br>
                    <p class="nhsuk-body-s">(Within reference range)</p>
                </td>
              </tr>
              <tr role="row" class="nhsuk-table__row">
                <td class="nhsuk-table__cell">8 November 2023</td>
                <td class="nhsuk-table__cell ">39
                    <br>
                    <p class="nhsuk-body-s">(Within reference range)</p>
                </td>
              </tr>
              <tr role="row" class="nhsuk-table__row">
                <td class="nhsuk-table__cell">26 September 2023</td>
                <td class="nhsuk-table__cell ">54
                    <br>
                    <p class="nhsuk-body-s">(Outside reference range)</p>
                </td>
              </tr>
              <tr role="row" class="nhsuk-table__row">
                <td class="nhsuk-table__cell">16 September 2023</td>
                <td class="nhsuk-table__cell ">48
                    <br>
                    <p class="nhsuk-body-s">(Outside reference range)</p>
                </td>
              </tr>
            </tbody>
          </table>
    </div>

    {% endblock %}

    {% block pageScripts %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script>
const data = [
      { month: 'Aug', value: 5.0 },
      { month: 'Sep', value: 6.0 },
      { month: 'Oct', value: 5.5 },
      { month: 'Nov', value: 4.0 },
      { month: 'Dec', value: 6.3 },
      { month: 'Jan', value: 7.0 },
      { month: 'Feb', value: 6.8 },
    ];

    // eslint-disable-next-line no-new
    new Chart(
      document.getElementById('graph'),
      {
        type: 'line',
        options: {
          maintainAspectRatio: false,
          animation: false,
          plugins: {
            legend: {
              display: false,
            },
            tooltip: {
              bodyColor: '#000000',
              backgroundColor: '#fff',
              cornerRadius: 0,
              boxPadding: 50,
              borderColor: '#000000',
              borderWidth: 1,
            },
          },
          scales: {
            x: {
              border: {
                color: '#000000',
              },
            },
            y: {
              border: {
                color: '#000000',
              },
            },
          },
        },
        data: {
          labels: data.map(row => row.month),
          datasets: [
            {
              label: 'hb1ac',
              data: data.map(row => row.value),
              borderColor: '#000000',
              borderWidth: 1,
              pointRadius: 4,
              pointBackgroundColor: '#000000',
            }
          ],
        },
      },
    );


</script>

  {% endblock %}